<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the LocalFileComparator class from the flutter_test library, for the Dart programming language.">
  <title>LocalFileComparator class - flutter_test library - Dart API</title>

  <!-- required because all the links are pseudo-absolute -->
  <base href="../">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  <!-- style overrides for dartdoc -->
<style>
@import 'https://fonts.googleapis.com/css?family=Roboto:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Google+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Open+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round';
</style>

<link href="https://flutter.github.io/assets-for-api-docs/assets/cupertino/cupertino.css" rel="stylesheet" type="text/css">

<link href="../assets/overrides.css" rel="stylesheet" type="text/css">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round" rel="stylesheet">
<style>
  /* Rule for sizing the icon. */
  .md-36 { font-size: 36px; }
</style>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f)
})(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
<!-- End Google Tag Manager -->

<script async="" defer="" src="../assets/api_survey.js"></script>

<!-- Styles and scripting for handling custom code snippets -->
<link href="../assets/snippets.css" rel="stylesheet" type="text/css">
<script src="../assets/snippets.js"></script>

<link rel="search" type="application/opensearchdescription+xml" title="Flutter API" href="/opensearch.xml"/>

</head>


<body data-base-href="../" data-using-base-href="true" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="flutter_test/flutter_test-library.html">flutter_test</a></li>
    <li class="self-crumb">LocalFileComparator class</li>
  </ol>
  <div class="self-name">LocalFileComparator</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        brightness_4
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        brightness_5
      </span>
    </label>
  </div>
</header>
<main>

  <div
      id="dartdoc-main-content"
      class="main-content"
      data-above-sidebar="flutter_test&#47;flutter_test-library-sidebar.html"
      data-below-sidebar="flutter_test&#47;LocalFileComparator-class-sidebar.html">
      <div>
  <div id="external-links" class="btn-group"><a title="View source code" class="source-link" href="https://github.com/flutter/flutter/blob/master/packages/flutter_test/lib/src/_goldens_io.dart#L59"><span class="material-symbols-outlined">description</span></a></div>
<h1><span class="kind-class">LocalFileComparator</span> class 
 
</h1></div>

    
<section class="desc markdown">
  <p>The default <a href="flutter_test/GoldenFileComparator-class.html">GoldenFileComparator</a> implementation for <code>flutter test</code>.</p>
<p>The term <strong>golden file</strong> refers to a master image that is considered the
true rendering of a given widget, state, application, or other visual
representation you have chosen to capture. This comparator loads golden
files from the local file system, treating the golden key as a relative
path from the test file's directory.</p>
<p>This comparator performs a pixel-for-pixel comparison of the decoded PNGs,
returning true only if there's an exact match. In cases where the captured
test image does not match the golden file, this comparator will provide
output to illustrate the difference, described in further detail below.</p>
<p>When using <code>flutter test --update-goldens</code>, <a href="flutter_test/LocalFileComparator-class.html">LocalFileComparator</a>
updates the golden files on disk to match the rendering.</p>
<h2 id="local-output-from-golden-file-testing">Local Output from Golden File Testing</h2>
<p>The <a href="flutter_test/LocalFileComparator-class.html">LocalFileComparator</a> will output test feedback when a golden file test
fails. This output takes the form of differential images contained within a
<code>failures</code> directory that will be generated in the same location specified
by the golden key. The differential images include the master and test
images that were compared, as well as an isolated diff of detected pixels,
and a masked diff that overlays these detected pixels over the master image.</p>
<p>The following images are examples of a test failure output:</p>
<table>
<thead>
<tr>
<th>File Name</th>
<th>Image Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>testName_masterImage.png</td>
<td><img src="https://flutter.github.io/assets-for-api-docs/assets/flutter-test/goldens/widget_masterImage.png" alt="A golden master image"></td>
</tr>
<tr>
<td>testName_testImage.png</td>
<td><img src="https://flutter.github.io/assets-for-api-docs/assets/flutter-test/goldens/widget_testImage.png" alt="Test image"></td>
</tr>
<tr>
<td>testName_isolatedDiff.png</td>
<td><img src="https://flutter.github.io/assets-for-api-docs/assets/flutter-test/goldens/widget_isolatedDiff.png" alt="An isolated pixel difference."></td>
</tr>
<tr>
<td>testName_maskedDiff.png</td>
<td><img src="https://flutter.github.io/assets-for-api-docs/assets/flutter-test/goldens/widget_maskedDiff.png" alt="A masked pixel difference"></td>
</tr>
</tbody>
</table>
<h2 id="including-fonts">Including Fonts</h2>
<p>Custom fonts may render differently across different platforms, or
between different versions of Flutter. For example, a golden file generated
on Windows with fonts will likely differ from the one produced by another
operating system. Even on the same platform, if the generated golden is
tested with a different Flutter version, the test may fail and require an
updated image.</p>
<p>By default, the Flutter framework uses a font called 'Ahem' which shows
squares instead of characters, however, it is possible to render images using
custom fonts. For example, this is how to load the 'Roboto' font for a
golden test:</p>
<p>
<a name="flutter_test.flutter_test.matchesGoldenFile.2"></a>
<div class="snippet snippet-container anchor-container">
  <div class="snippet-description">
How to load a custom font for golden images.
</div>
  <a class="anchor-button-overlay anchor-button" title="Copy link to clipboard"
    onmouseenter="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.2');" onclick="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.2'); copyStringToClipboard(this.href);"
    href="#">
    <i class="material-icons anchor-image">link</i>
  </a>
  <div class="copyable-container">
    <button class="copy-button-overlay copy-button" title="Copy to clipboard"
      onclick="copyTextToClipboard(findSiblingWithId(this, 'sample-code'));">
      <i class="material-icons copy-image">content_copy</i>
    </button>
    <pre class="language-dart" id="sample-code"><code class="language-dart">testWidgets(&#39;Creating a golden image with a custom font&#39;, (WidgetTester tester) async {
  &#47;&#47; Assuming the &#39;Roboto.ttf&#39; file is declared in the pubspec.yaml file
  final Future&lt;ByteData&gt; font = rootBundle.load(&#39;path&#47;to&#47;font-file&#47;Roboto.ttf&#39;);

  final FontLoader fontLoader = FontLoader(&#39;Roboto&#39;)..addFont(font);
  await fontLoader.load();

  await tester.pumpWidget(const MyWidget());

  await expectLater(
    find.byType(MyWidget),
    matchesGoldenFile(&#39;myWidget.png&#39;),
  );
});</code></pre>
  </div>
</div>
</p>
<p>The example above loads the desired font only for that specific test. To load
a font for all golden file tests, the <code>FontLoader.load()</code> call could be
moved in the <code>flutter_test_config.dart</code>. In this way, the font will always be
loaded before a test:</p>
<p>
<a name="flutter_test.flutter_test.matchesGoldenFile.3"></a>
<div class="snippet snippet-container anchor-container">
  <div class="snippet-description">
Loading a custom font from the flutter_test_config.dart file.
</div>
  <a class="anchor-button-overlay anchor-button" title="Copy link to clipboard"
    onmouseenter="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.3');" onclick="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.3'); copyStringToClipboard(this.href);"
    href="#">
    <i class="material-icons anchor-image">link</i>
  </a>
  <div class="copyable-container">
    <button class="copy-button-overlay copy-button" title="Copy to clipboard"
      onclick="copyTextToClipboard(findSiblingWithId(this, 'sample-code'));">
      <i class="material-icons copy-image">content_copy</i>
    </button>
    <pre class="language-dart" id="sample-code"><code class="language-dart">Future&lt;void&gt; testExecutable(FutureOr&lt;void&gt; Function() testMain) async {
  setUpAll(() async {
    final FontLoader fontLoader = FontLoader(&#39;SomeFont&#39;)..addFont(someFont);
    await fontLoader.load();
  });

  await testMain();
}</code></pre>
  </div>
</div>
</p>
<p>See also:</p>
<ul>
<li><a href="flutter_test/GoldenFileComparator-class.html">GoldenFileComparator</a>, the abstract class that <a href="flutter_test/LocalFileComparator-class.html">LocalFileComparator</a>
  implements.</li>
<li><a href="flutter_test/matchesGoldenFile.html">matchesGoldenFile</a>, the function from <a href="flutter_test/flutter_test-library.html">flutter_test</a> that invokes the
   comparator.</li>
</ul>
</section>


    <section>
      <dl class="dl-horizontal">
        
  <dt>Inheritance</dt>
  <dd>
    <ul class="gt-separated dark clazz-relationships">
      <li><a href="dart-core/Object-class.html">Object</a></li>
        <li><a href="flutter_test/GoldenFileComparator-class.html">GoldenFileComparator</a></li>
      <li>LocalFileComparator</li>
    </ul>
  </dd>

        
        
  <dt>Mixed in types</dt>
  <dd>
    <ul class="comma-separated clazz-relationships">
        <li><a href="flutter_test/LocalComparisonOutput-mixin.html">LocalComparisonOutput</a></li>
    </ul>
  </dd>



        


      </dl>
    </section>

    
  <section class="summary offset-anchor" id="constructors">
    <h2>Constructors</h2>

    <dl class="constructor-summary-list">
        <dt id="LocalFileComparator" class="callable">
          <span class="name"><a href="flutter_test/LocalFileComparator/LocalFileComparator.html">LocalFileComparator</a></span><span class="signature">(<span class="parameter" id="-param-testFile"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">testFile</span>, </span><span class="parameter" id="-param-pathStyle">{<span class="type-annotation"><a href="package-path_path/Style-class.html">Style</a>?</span> <span class="parameter-name">pathStyle</span>}</span>)</span>
        </dt>
        <dd>
          Creates a new <a href="flutter_test/LocalFileComparator-class.html">LocalFileComparator</a> for the specified <code>testFile</code>.
        </dd>
    </dl>
  </section>

    <section class="summary offset-anchor" id="instance-properties">
      <h2>Properties</h2>

      <dl class="properties">
        <dt id="basedir" class="property">
  <span class="name"><a href="flutter_test/LocalFileComparator/basedir.html">basedir</a></span>
  <span class="signature">&#8594; <a href="dart-core/Uri-class.html">Uri</a></span> 

</dt>
<dd>
  The directory in which the test was loaded.
  <div class="features"><span class="feature">final</span></div>

</dd>

        <dt id="hashCode" class="property inherited">
  <span class="name"><a href="dart-core/Object/hashCode.html">hashCode</a></span>
  <span class="signature">&#8594; <a href="dart-core/int-class.html">int</a></span> 

</dt>
<dd class="inherited">
  The hash code for this object.
  <div class="features"><span class="feature">read-only</span><span class="feature">inherited</span></div>

</dd>

        <dt id="runtimeType" class="property inherited">
  <span class="name"><a href="dart-core/Object/runtimeType.html">runtimeType</a></span>
  <span class="signature">&#8594; <a href="dart-core/Type-class.html">Type</a></span> 

</dt>
<dd class="inherited">
  A representation of the runtime type of the object.
  <div class="features"><span class="feature">read-only</span><span class="feature">inherited</span></div>

</dd>

      </dl>
    </section>

    
  <section
      class="summary offset-anchor"
      id="instance-methods">
    <h2>Methods</h2>
    <dl class="callables">
        <dt id="compare" class="callable">
  <span class="name"><a href="flutter_test/LocalFileComparator/compare.html">compare</a></span><span class="signature">(<wbr><span class="parameter" id="compare-param-imageBytes"><span class="type-annotation"><a href="dart-typed_data/Uint8List-class.html">Uint8List</a></span> <span class="parameter-name">imageBytes</span>, </span><span class="parameter" id="compare-param-golden"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">golden</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/bool-class.html">bool</a></span>&gt;</span></span>
  </span>
  

</dt>
<dd>
  Compares the pixels of decoded png <code>imageBytes</code> against the golden file
identified by <code>golden</code>.
  <div class="features"><span class="feature">override</span></div>

</dd>

        <dt id="generateFailureOutput" class="callable inherited">
  <span class="name"><a href="flutter_test/LocalComparisonOutput/generateFailureOutput.html">generateFailureOutput</a></span><span class="signature">(<wbr><span class="parameter" id="generateFailureOutput-param-result"><span class="type-annotation"><a href="flutter_test/ComparisonResult-class.html">ComparisonResult</a></span> <span class="parameter-name">result</span>, </span><span class="parameter" id="generateFailureOutput-param-golden"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">golden</span>, </span><span class="parameter" id="generateFailureOutput-param-basedir"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">basedir</span>, </span><span class="parameter" id="generateFailureOutput-param-key">{<span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">key</span> = <span class="default-value">&#39;&#39;</span>}</span>)
    <span class="returntype parameter">&#8594; <a href="dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/String-class.html">String</a></span>&gt;</span></span>
  </span>
  

</dt>
<dd class="inherited">
  Writes out diffs from the <a href="flutter_test/ComparisonResult-class.html">ComparisonResult</a> of a golden file test.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="getFailureFile" class="callable inherited">
  <span class="name"><a href="flutter_test/LocalComparisonOutput/getFailureFile.html">getFailureFile</a></span><span class="signature">(<wbr><span class="parameter" id="getFailureFile-param-failure"><span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">failure</span>, </span><span class="parameter" id="getFailureFile-param-golden"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">golden</span>, </span><span class="parameter" id="getFailureFile-param-basedir"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">basedir</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-io/File-class.html">File</a></span>
  </span>
  

</dt>
<dd class="inherited">
  Returns the appropriate file for a given diff from a <a href="flutter_test/ComparisonResult-class.html">ComparisonResult</a>.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="getGoldenBytes" class="callable">
  <span class="name"><a href="flutter_test/LocalFileComparator/getGoldenBytes.html">getGoldenBytes</a></span><span class="signature">(<wbr><span class="parameter" id="getGoldenBytes-param-golden"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">golden</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/int-class.html">int</a></span>&gt;</span></span>&gt;</span></span>
  </span>
  

</dt>
<dd>
  Returns the bytes of the given <code>golden</code> file.
  

</dd>

        <dt id="getTestUri" class="callable inherited">
  <span class="name"><a href="flutter_test/GoldenFileComparator/getTestUri.html">getTestUri</a></span><span class="signature">(<wbr><span class="parameter" id="getTestUri-param-key"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">key</span>, </span><span class="parameter" id="getTestUri-param-version"><span class="type-annotation"><a href="dart-core/int-class.html">int</a>?</span> <span class="parameter-name">version</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-core/Uri-class.html">Uri</a></span>
  </span>
  

</dt>
<dd class="inherited">
  Returns a new golden file <a href="dart-core/Uri-class.html">Uri</a> to incorporate any <code>version</code> number with
the <code>key</code>.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="noSuchMethod" class="callable inherited">
  <span class="name"><a href="dart-core/Object/noSuchMethod.html">noSuchMethod</a></span><span class="signature">(<wbr><span class="parameter" id="noSuchMethod-param-invocation"><span class="type-annotation"><a href="dart-core/Invocation-class.html">Invocation</a></span> <span class="parameter-name">invocation</span></span>)
    <span class="returntype parameter">&#8594; dynamic</span>
  </span>
  

</dt>
<dd class="inherited">
  Invoked when a nonexistent method or property is accessed.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="toString" class="callable inherited">
  <span class="name"><a href="dart-core/Object/toString.html">toString</a></span><span class="signature">(<wbr>)
    <span class="returntype parameter">&#8594; <a href="dart-core/String-class.html">String</a></span>
  </span>
  

</dt>
<dd class="inherited">
  A string representation of this object.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="update" class="callable">
  <span class="name"><a href="flutter_test/LocalFileComparator/update.html">update</a></span><span class="signature">(<wbr><span class="parameter" id="update-param-golden"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">golden</span>, </span><span class="parameter" id="update-param-imageBytes"><span class="type-annotation"><a href="dart-typed_data/Uint8List-class.html">Uint8List</a></span> <span class="parameter-name">imageBytes</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter">void</span>&gt;</span></span>
  </span>
  

</dt>
<dd>
  Updates the golden file identified by <code>golden</code> with <code>imageBytes</code>.
  <div class="features"><span class="feature">override</span></div>

</dd>

    </dl>
  </section>
    
  <section
      class="summary offset-anchor inherited"
      id="operators">
    <h2>Operators</h2>
    <dl class="callables">
        <dt id="operator ==" class="callable inherited">
  <span class="name"><a href="dart-core/Object/operator_equals.html">operator ==</a></span><span class="signature">(<wbr><span class="parameter" id="==-param-other"><span class="type-annotation"><a href="dart-core/Object-class.html">Object</a></span> <span class="parameter-name">other</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-core/bool-class.html">bool</a></span>
  </span>
  

</dt>
<dd class="inherited">
  The equality operator.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

    </dl>
  </section>
    
    
    


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="flutter_test/flutter_test-library.html">flutter_test</a></li>
    <li class="self-crumb">LocalFileComparator class</li>
</ol>


    <!--<h5>flutter_test library</h5>-->
    <div id="dartdoc-sidebar-left-content"></div>
  </div>

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    Flutter
      0.0.0
  </span>

  <script src="footer.js"></script>
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


</body>

</html>

