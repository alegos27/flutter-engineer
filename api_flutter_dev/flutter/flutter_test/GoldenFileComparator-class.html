<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the GoldenFileComparator class from the flutter_test library, for the Dart programming language.">
  <title>GoldenFileComparator class - flutter_test library - Dart API</title>

  <!-- required because all the links are pseudo-absolute -->
  <base href="../">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  <!-- style overrides for dartdoc -->
<style>
@import 'https://fonts.googleapis.com/css?family=Roboto:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Google+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Open+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round';
</style>

<link href="https://flutter.github.io/assets-for-api-docs/assets/cupertino/cupertino.css" rel="stylesheet" type="text/css">

<link href="../assets/overrides.css" rel="stylesheet" type="text/css">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round" rel="stylesheet">
<style>
  /* Rule for sizing the icon. */
  .md-36 { font-size: 36px; }
</style>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f)
})(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
<!-- End Google Tag Manager -->

<script async="" defer="" src="../assets/api_survey.js"></script>

<!-- Styles and scripting for handling custom code snippets -->
<link href="../assets/snippets.css" rel="stylesheet" type="text/css">
<script src="../assets/snippets.js"></script>

<link rel="search" type="application/opensearchdescription+xml" title="Flutter API" href="/opensearch.xml"/>

</head>


<body data-base-href="../" data-using-base-href="true" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="flutter_test/flutter_test-library.html">flutter_test</a></li>
    <li class="self-crumb">GoldenFileComparator class</li>
  </ol>
  <div class="self-name">GoldenFileComparator</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        brightness_4
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        brightness_5
      </span>
    </label>
  </div>
</header>
<main>

  <div
      id="dartdoc-main-content"
      class="main-content"
      data-above-sidebar="flutter_test&#47;flutter_test-library-sidebar.html"
      data-below-sidebar="flutter_test&#47;GoldenFileComparator-class-sidebar.html">
      <div>
  <div id="external-links" class="btn-group"><a title="View source code" class="source-link" href="https://github.com/flutter/flutter/blob/master/packages/flutter_test/lib/src/goldens.dart#L51"><span class="material-symbols-outlined">description</span></a></div>
<h1><span class="kind-class">GoldenFileComparator</span> class 
    <a href="https://dart.dev/language/classes#abstract-classes" class="feature feature-abstract" title="This type can not be directly constructed.">abstract</a>
 
</h1></div>

    
<section class="desc markdown">
  <p>Compares image pixels against a golden image file.</p>
<p>Instances of this comparator will be used as the backend for
<a href="flutter_test/matchesGoldenFile.html">matchesGoldenFile</a>.</p>
<p>Instances of this comparator will be invoked by the test framework in the
<a href="flutter_test/TestWidgetsFlutterBinding/runAsync.html">TestWidgetsFlutterBinding.runAsync</a> zone and are thus not subject to the
fake async constraints that are normally imposed on widget tests (i.e. the
need or the ability to call <a href="flutter_test/WidgetTester/pump.html">WidgetTester.pump</a> to advance the microtask
queue).</p>
<h2 id="what-is-golden-file-testing">What is Golden File Testing?</h2>
<p>The term <strong>golden file</strong> refers to a master image that is considered the true
rendering of a given widget, state, application, or other visual
representation you have chosen to capture.</p>
<p>By keeping a master reference of visual aspects of your application, you can
prevent unintended changes as you develop by testing against them.</p>
<p>Here, a minor code change has altered the appearance of a widget. A golden
file test has compared the image generated at the time of the test to the
golden master file that was generated earlier. The test has identified the
change, preventing unintended modifications.</p>
<table>
<thead>
<tr>
<th>Sample</th>
<th>Image</th>
</tr>
</thead>
<tbody>
<tr>
<td>Golden Master Image</td>
<td><img src="https://flutter.github.io/assets-for-api-docs/assets/flutter-test/goldens/widget_masterImage.png" alt="A golden master image"></td>
</tr>
<tr>
<td>Difference</td>
<td><img src="https://flutter.github.io/assets-for-api-docs/assets/flutter-test/goldens/widget_isolatedDiff.png" alt="The pixel difference"></td>
</tr>
<tr>
<td>Test image after modification</td>
<td><img src="https://flutter.github.io/assets-for-api-docs/assets/flutter-test/goldens/widget_testImage.png" alt="Test image"></td>
</tr>
</tbody>
</table>
<h2 id="including-fonts">Including Fonts</h2>
<p>Custom fonts may render differently across different platforms, or
between different versions of Flutter. For example, a golden file generated
on Windows with fonts will likely differ from the one produced by another
operating system. Even on the same platform, if the generated golden is
tested with a different Flutter version, the test may fail and require an
updated image.</p>
<p>By default, the Flutter framework uses a font called 'Ahem' which shows
squares instead of characters, however, it is possible to render images using
custom fonts. For example, this is how to load the 'Roboto' font for a
golden test:</p>
<p>
<a name="flutter_test.flutter_test.matchesGoldenFile.2"></a>
<div class="snippet snippet-container anchor-container">
  <div class="snippet-description">
How to load a custom font for golden images.
</div>
  <a class="anchor-button-overlay anchor-button" title="Copy link to clipboard"
    onmouseenter="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.2');" onclick="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.2'); copyStringToClipboard(this.href);"
    href="#">
    <i class="material-icons anchor-image">link</i>
  </a>
  <div class="copyable-container">
    <button class="copy-button-overlay copy-button" title="Copy to clipboard"
      onclick="copyTextToClipboard(findSiblingWithId(this, 'sample-code'));">
      <i class="material-icons copy-image">content_copy</i>
    </button>
    <pre class="language-dart" id="sample-code"><code class="language-dart">testWidgets(&#39;Creating a golden image with a custom font&#39;, (WidgetTester tester) async {
  &#47;&#47; Assuming the &#39;Roboto.ttf&#39; file is declared in the pubspec.yaml file
  final Future&lt;ByteData&gt; font = rootBundle.load(&#39;path&#47;to&#47;font-file&#47;Roboto.ttf&#39;);

  final FontLoader fontLoader = FontLoader(&#39;Roboto&#39;)..addFont(font);
  await fontLoader.load();

  await tester.pumpWidget(const MyWidget());

  await expectLater(
    find.byType(MyWidget),
    matchesGoldenFile(&#39;myWidget.png&#39;),
  );
});</code></pre>
  </div>
</div>
</p>
<p>The example above loads the desired font only for that specific test. To load
a font for all golden file tests, the <code>FontLoader.load()</code> call could be
moved in the <code>flutter_test_config.dart</code>. In this way, the font will always be
loaded before a test:</p>
<p>
<a name="flutter_test.flutter_test.matchesGoldenFile.3"></a>
<div class="snippet snippet-container anchor-container">
  <div class="snippet-description">
Loading a custom font from the flutter_test_config.dart file.
</div>
  <a class="anchor-button-overlay anchor-button" title="Copy link to clipboard"
    onmouseenter="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.3');" onclick="fixHref(this, 'flutter_test.flutter_test.matchesGoldenFile.3'); copyStringToClipboard(this.href);"
    href="#">
    <i class="material-icons anchor-image">link</i>
  </a>
  <div class="copyable-container">
    <button class="copy-button-overlay copy-button" title="Copy to clipboard"
      onclick="copyTextToClipboard(findSiblingWithId(this, 'sample-code'));">
      <i class="material-icons copy-image">content_copy</i>
    </button>
    <pre class="language-dart" id="sample-code"><code class="language-dart">Future&lt;void&gt; testExecutable(FutureOr&lt;void&gt; Function() testMain) async {
  setUpAll(() async {
    final FontLoader fontLoader = FontLoader(&#39;SomeFont&#39;)..addFont(someFont);
    await fontLoader.load();
  });

  await testMain();
}</code></pre>
  </div>
</div>
</p>
<p>See also:</p>
<ul>
<li><a href="flutter_test/LocalFileComparator-class.html">LocalFileComparator</a> for the default <a href="flutter_test/GoldenFileComparator-class.html">GoldenFileComparator</a>
implementation for <code>flutter test</code>.</li>
<li><a href="flutter_test/matchesGoldenFile.html">matchesGoldenFile</a>, the function from <a href="flutter_test/flutter_test-library.html">flutter_test</a> that invokes the
comparator.</li>
</ul>
</section>


    <section>
      <dl class="dl-horizontal">
        

        
        

        <dt>Implementers</dt>
        <dd><ul class="comma-separated clazz-relationships">
          <li><a href="flutter_test/LocalFileComparator-class.html">LocalFileComparator</a></li>
          <li><a href="flutter_test/TrivialComparator-class.html">TrivialComparator</a></li>
        </ul></dd>


        


      </dl>
    </section>

    
  <section class="summary offset-anchor" id="constructors">
    <h2>Constructors</h2>

    <dl class="constructor-summary-list">
        <dt id="GoldenFileComparator" class="callable">
          <span class="name"><a href="flutter_test/GoldenFileComparator/GoldenFileComparator.html">GoldenFileComparator</a></span><span class="signature">()</span>
        </dt>
        <dd>
          
        </dd>
    </dl>
  </section>

    <section class="summary offset-anchor inherited" id="instance-properties">
      <h2>Properties</h2>

      <dl class="properties">
        <dt id="hashCode" class="property inherited">
  <span class="name"><a href="dart-core/Object/hashCode.html">hashCode</a></span>
  <span class="signature">&#8594; <a href="dart-core/int-class.html">int</a></span> 

</dt>
<dd class="inherited">
  The hash code for this object.
  <div class="features"><span class="feature">read-only</span><span class="feature">inherited</span></div>

</dd>

        <dt id="runtimeType" class="property inherited">
  <span class="name"><a href="dart-core/Object/runtimeType.html">runtimeType</a></span>
  <span class="signature">&#8594; <a href="dart-core/Type-class.html">Type</a></span> 

</dt>
<dd class="inherited">
  A representation of the runtime type of the object.
  <div class="features"><span class="feature">read-only</span><span class="feature">inherited</span></div>

</dd>

      </dl>
    </section>

    
  <section
      class="summary offset-anchor"
      id="instance-methods">
    <h2>Methods</h2>
    <dl class="callables">
        <dt id="compare" class="callable">
  <span class="name"><a href="flutter_test/GoldenFileComparator/compare.html">compare</a></span><span class="signature">(<wbr><span class="parameter" id="compare-param-imageBytes"><span class="type-annotation"><a href="dart-typed_data/Uint8List-class.html">Uint8List</a></span> <span class="parameter-name">imageBytes</span>, </span><span class="parameter" id="compare-param-golden"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">golden</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/bool-class.html">bool</a></span>&gt;</span></span>
  </span>
  

</dt>
<dd>
  Compares the pixels of decoded png <code>imageBytes</code> against the golden file
identified by <code>golden</code>.
  

</dd>

        <dt id="getTestUri" class="callable">
  <span class="name"><a href="flutter_test/GoldenFileComparator/getTestUri.html">getTestUri</a></span><span class="signature">(<wbr><span class="parameter" id="getTestUri-param-key"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">key</span>, </span><span class="parameter" id="getTestUri-param-version"><span class="type-annotation"><a href="dart-core/int-class.html">int</a>?</span> <span class="parameter-name">version</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-core/Uri-class.html">Uri</a></span>
  </span>
  

</dt>
<dd>
  Returns a new golden file <a href="dart-core/Uri-class.html">Uri</a> to incorporate any <code>version</code> number with
the <code>key</code>.
  

</dd>

        <dt id="noSuchMethod" class="callable inherited">
  <span class="name"><a href="dart-core/Object/noSuchMethod.html">noSuchMethod</a></span><span class="signature">(<wbr><span class="parameter" id="noSuchMethod-param-invocation"><span class="type-annotation"><a href="dart-core/Invocation-class.html">Invocation</a></span> <span class="parameter-name">invocation</span></span>)
    <span class="returntype parameter">&#8594; dynamic</span>
  </span>
  

</dt>
<dd class="inherited">
  Invoked when a nonexistent method or property is accessed.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="toString" class="callable inherited">
  <span class="name"><a href="dart-core/Object/toString.html">toString</a></span><span class="signature">(<wbr>)
    <span class="returntype parameter">&#8594; <a href="dart-core/String-class.html">String</a></span>
  </span>
  

</dt>
<dd class="inherited">
  A string representation of this object.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="update" class="callable">
  <span class="name"><a href="flutter_test/GoldenFileComparator/update.html">update</a></span><span class="signature">(<wbr><span class="parameter" id="update-param-golden"><span class="type-annotation"><a href="dart-core/Uri-class.html">Uri</a></span> <span class="parameter-name">golden</span>, </span><span class="parameter" id="update-param-imageBytes"><span class="type-annotation"><a href="dart-typed_data/Uint8List-class.html">Uint8List</a></span> <span class="parameter-name">imageBytes</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter">void</span>&gt;</span></span>
  </span>
  

</dt>
<dd>
  Updates the golden file identified by <code>golden</code> with <code>imageBytes</code>.
  

</dd>

    </dl>
  </section>
    
  <section
      class="summary offset-anchor inherited"
      id="operators">
    <h2>Operators</h2>
    <dl class="callables">
        <dt id="operator ==" class="callable inherited">
  <span class="name"><a href="dart-core/Object/operator_equals.html">operator ==</a></span><span class="signature">(<wbr><span class="parameter" id="==-param-other"><span class="type-annotation"><a href="dart-core/Object-class.html">Object</a></span> <span class="parameter-name">other</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-core/bool-class.html">bool</a></span>
  </span>
  

</dt>
<dd class="inherited">
  The equality operator.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

    </dl>
  </section>
    
    
  <section class="summary offset-anchor" id="static-methods">
    <h2>Static Methods</h2>
    <dl class="callables">
        <dt id="compareLists" class="callable">
  <span class="name"><a href="flutter_test/GoldenFileComparator/compareLists.html">compareLists</a></span><span class="signature">(<wbr><span class="parameter" id="compareLists-param-test"><span class="type-annotation"><a href="dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/int-class.html">int</a></span>&gt;</span></span> <span class="parameter-name">test</span>, </span><span class="parameter" id="compareLists-param-master"><span class="type-annotation"><a href="dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/int-class.html">int</a></span>&gt;</span></span> <span class="parameter-name">master</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="flutter_test/ComparisonResult-class.html">ComparisonResult</a></span>&gt;</span></span>
  </span>
  

</dt>
<dd>
  Returns a <code>ComparisonResult</code> to describe the pixel differential of the
<code>test</code> and <code>master</code> image bytes provided.
  

</dd>

    </dl>
  </section>
    


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="flutter_test/flutter_test-library.html">flutter_test</a></li>
    <li class="self-crumb">GoldenFileComparator class</li>
</ol>


    <!--<h5>flutter_test library</h5>-->
    <div id="dartdoc-sidebar-left-content"></div>
  </div>

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    Flutter
      0.0.0
  </span>

  <script src="footer.js"></script>
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


</body>

</html>

