<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the drawRawAtlas method from the Canvas class, for the Dart programming language.">
  <title>drawRawAtlas method - Canvas class - dart:ui library - Dart API</title>

  <!-- required because all the links are pseudo-absolute -->
  <base href="../../">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  <!-- style overrides for dartdoc -->
<style>
@import 'https://fonts.googleapis.com/css?family=Roboto:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Google+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Open+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round';
</style>

<link href="https://flutter.github.io/assets-for-api-docs/assets/cupertino/cupertino.css" rel="stylesheet" type="text/css">

<link href="../assets/overrides.css" rel="stylesheet" type="text/css">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round" rel="stylesheet">
<style>
  /* Rule for sizing the icon. */
  .md-36 { font-size: 36px; }
</style>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f)
})(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
<!-- End Google Tag Manager -->

<script async="" defer="" src="../assets/api_survey.js"></script>

<!-- Styles and scripting for handling custom code snippets -->
<link href="../assets/snippets.css" rel="stylesheet" type="text/css">
<script src="../assets/snippets.js"></script>

<link rel="search" type="application/opensearchdescription+xml" title="Flutter API" href="/opensearch.xml"/>

</head>


<body data-base-href="../../" data-using-base-href="true" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="dart-ui/dart-ui-library.html">dart:ui</a></li>
    <li><a href="dart-ui/Canvas-class.html">Canvas</a></li>
    <li class="self-crumb">drawRawAtlas abstract method</li>
  </ol>
  <div class="self-name">drawRawAtlas</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        brightness_4
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        brightness_5
      </span>
    </label>
  </div>
</header>
<main>

  <div
      id="dartdoc-main-content"
      class="main-content"
      data-above-sidebar="dart-ui&#47;Canvas-class-sidebar.html"
      data-below-sidebar="">
      <div>
<h1><span class="kind-method">drawRawAtlas</span> abstract method 
</h1></div>

    <section class="multi-line-signature">
      

<span class="returntype">void</span>
<span class="name ">drawRawAtlas</span>(<wbr><ol class="parameter-list"><li><span class="parameter" id="drawRawAtlas-param-atlas"><span class="type-annotation"><a href="dart-ui/Image-class.html">Image</a></span> <span class="parameter-name">atlas</span>, </span></li>
<li><span class="parameter" id="drawRawAtlas-param-rstTransforms"><span class="type-annotation"><a href="dart-typed_data/Float32List-class.html">Float32List</a></span> <span class="parameter-name">rstTransforms</span>, </span></li>
<li><span class="parameter" id="drawRawAtlas-param-rects"><span class="type-annotation"><a href="dart-typed_data/Float32List-class.html">Float32List</a></span> <span class="parameter-name">rects</span>, </span></li>
<li><span class="parameter" id="drawRawAtlas-param-colors"><span class="type-annotation"><a href="dart-typed_data/Int32List-class.html">Int32List</a>?</span> <span class="parameter-name">colors</span>, </span></li>
<li><span class="parameter" id="drawRawAtlas-param-blendMode"><span class="type-annotation"><a href="dart-ui/BlendMode.html">BlendMode</a>?</span> <span class="parameter-name">blendMode</span>, </span></li>
<li><span class="parameter" id="drawRawAtlas-param-cullRect"><span class="type-annotation"><a href="dart-ui/Rect-class.html">Rect</a>?</span> <span class="parameter-name">cullRect</span>, </span></li>
<li><span class="parameter" id="drawRawAtlas-param-paint"><span class="type-annotation"><a href="dart-ui/Paint-class.html">Paint</a></span> <span class="parameter-name">paint</span></span></li>
</ol>)

      

    </section>
    
<section class="desc markdown">
  <p>Draws many parts of an image - the <code>atlas</code> - onto the canvas.</p>
<p>This method allows for optimization when you want to draw many parts of an
image onto the canvas, such as when using sprites or zooming. It is more efficient
than using multiple calls to <a href="dart-ui/Canvas/drawImageRect.html">drawImageRect</a> and provides more functionality
to individually transform each image part by a separate rotation or scale and
blend or modulate those parts with a solid color. It is also more efficient
than <a href="dart-ui/Canvas/drawAtlas.html">drawAtlas</a> as the data in the arguments is already packed in a format
that can be directly used by the rendering code.</p>
<p>A full description of how this method uses its arguments to draw onto the
canvas can be found in the description of the <a href="dart-ui/Canvas/drawAtlas.html">drawAtlas</a> method.</p>
<p>The <code>rstTransforms</code> argument is interpreted as a list of four-tuples, with
each tuple being (<a href="dart-ui/RSTransform/scos.html">RSTransform.scos</a>, <a href="dart-ui/RSTransform/ssin.html">RSTransform.ssin</a>,
<a href="dart-ui/RSTransform/tx.html">RSTransform.tx</a>, <a href="dart-ui/RSTransform/ty.html">RSTransform.ty</a>).</p>
<p>The <code>rects</code> argument is interpreted as a list of four-tuples, with each
tuple being (<a href="dart-ui/Rect/left.html">Rect.left</a>, <a href="dart-ui/Rect/top.html">Rect.top</a>, <a href="dart-ui/Rect/right.html">Rect.right</a>, <a href="dart-ui/Rect/bottom.html">Rect.bottom</a>).</p>
<p>The <code>colors</code> argument, which can be null, is interpreted as a list of
32-bit colors, with the same packing as <a href="dart-ui/Color/value.html">Color.value</a>. If the <code>colors</code>
argument is not null then the <code>blendMode</code> argument must also not be null.</p>
<p>An example usage to render many sprites from a single sprite atlas with no rotations
or scales:</p>
<pre class="language-dart"><code class="language-dart">class Sprite {
  Sprite(this.index, this.center);
  int index;
  Offset center;
}

class MyPainter extends CustomPainter {
  MyPainter(this.spriteAtlas, this.allSprites);

  // assume spriteAtlas contains N 10x10 sprites side by side in a (N*10)x10 image
  ui.Image spriteAtlas;
  List&lt;Sprite&gt; allSprites;

  @override
  void paint(Canvas canvas, Size size) {
    // For best advantage, these lists should be cached and only specific
    // entries updated when the sprite information changes. This code is
    // illustrative of how to set up the data and not a recommendation for
    // optimal usage.
    Float32List rectList = Float32List(allSprites.length * 4);
    Float32List transformList = Float32List(allSprites.length * 4);
    for (int i = 0; i &lt; allSprites.length; i++) {
      Sprite sprite = allSprites[i];
      final double rectX = sprite.index * 10.0;
      rectList[i * 4 + 0] = rectX;
      rectList[i * 4 + 1] = 0.0;
      rectList[i * 4 + 2] = rectX + 10.0;
      rectList[i * 4 + 3] = 10.0;

      // This example sets the RSTransform values directly for a common case of no
      // rotations or scales and just a translation to position the atlas entry. For
      // more complicated transforms one could use the RSTransform class to compute
      // the necessary values or do the same math directly.
      transformList[i * 4 + 0] = 1.0;
      transformList[i * 4 + 1] = 0.0;
      transformList[i * 4 + 2] = sprite.center.dx - 5.0;
      transformList[i * 4 + 3] = sprite.center.dy - 5.0;
    }
    Paint paint = Paint();
    canvas.drawRawAtlas(spriteAtlas, transformList, rectList, null, null, null, paint);
  }

  // ...
}
</code></pre>
<p>Another example usage which renders sprites with an optional opacity and rotation:</p>
<pre class="language-dart"><code class="language-dart">class Sprite {
  Sprite(this.index, this.center, this.alpha, this.rotation);
  int index;
  Offset center;
  int alpha;
  double rotation;
}

class MyPainter extends CustomPainter {
  MyPainter(this.spriteAtlas, this.allSprites);

  // assume spriteAtlas contains N 10x10 sprites side by side in a (N*10)x10 image
  ui.Image spriteAtlas;
  List&lt;Sprite&gt; allSprites;

  @override
  void paint(Canvas canvas, Size size) {
    // For best advantage, these lists should be cached and only specific
    // entries updated when the sprite information changes. This code is
    // illustrative of how to set up the data and not a recommendation for
    // optimal usage.
    Float32List rectList = Float32List(allSprites.length * 4);
    Float32List transformList = Float32List(allSprites.length * 4);
    Int32List colorList = Int32List(allSprites.length);
    for (int i = 0; i &lt; allSprites.length; i++) {
      Sprite sprite = allSprites[i];
      final double rectX = sprite.index * 10.0;
      rectList[i * 4 + 0] = rectX;
      rectList[i * 4 + 1] = 0.0;
      rectList[i * 4 + 2] = rectX + 10.0;
      rectList[i * 4 + 3] = 10.0;

      // This example uses an RSTransform object to compute the necessary values for
      // the transform using a factory helper method because the sprites contain
      // rotation values which are not trivial to work with. But if the math for the
      // values falls out from other calculations on the sprites then the values could
      // possibly be generated directly from the sprite update code.
      final RSTransform transform = RSTransform.fromComponents(
        rotation: sprite.rotation,
        scale: 1.0,
        // Center of the sprite relative to its rect
        anchorX: 5.0,
        anchorY: 5.0,
        // Location at which to draw the center of the sprite
        translateX: sprite.center.dx,
        translateY: sprite.center.dy,
      );
      transformList[i * 4 + 0] = transform.scos;
      transformList[i * 4 + 1] = transform.ssin;
      transformList[i * 4 + 2] = transform.tx;
      transformList[i * 4 + 3] = transform.ty;

      // This example computes the color value directly, but one could also compute
      // an actual Color object and use its Color.value getter for the same result.
      // Since we are using BlendMode.srcIn, only the alpha component matters for
      // these colors which makes this a simple shift operation.
      colorList[i] = sprite.alpha &lt;&lt; 24;
    }
    Paint paint = Paint();
    canvas.drawRawAtlas(spriteAtlas, transformList, rectList, colorList, BlendMode.srcIn, null, paint);
  }

  // ...
}
</code></pre>
<p>See also:</p>
<ul>
<li><a href="dart-ui/Canvas/drawAtlas.html">drawAtlas</a>, which takes its arguments as objects rather than typed
data lists.</li>
</ul>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">void drawRawAtlas(Image atlas,
                  Float32List rstTransforms,
                  Float32List rects,
                  Int32List? colors,
                  BlendMode? blendMode,
                  Rect? cullRect,
                  Paint paint);</code></pre>
</section>


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="dart-ui/dart-ui-library.html">dart:ui</a></li>
    <li><a href="dart-ui/Canvas-class.html">Canvas</a></li>
    <li class="self-crumb">drawRawAtlas abstract method</li>
</ol>


    <h5>Canvas class</h5>
  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    Flutter
      0.0.0
  </span>

  <script src="footer.js"></script>
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


</body>

</html>

