<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the RestorationBucket class from the services library, for the Dart programming language.">
  <title>RestorationBucket class - services library - Dart API</title>

  <!-- required because all the links are pseudo-absolute -->
  <base href="../">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  <!-- style overrides for dartdoc -->
<style>
@import 'https://fonts.googleapis.com/css?family=Roboto:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Google+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Open+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round';
</style>

<link href="https://flutter.github.io/assets-for-api-docs/assets/cupertino/cupertino.css" rel="stylesheet" type="text/css">

<link href="../assets/overrides.css" rel="stylesheet" type="text/css">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round" rel="stylesheet">
<style>
  /* Rule for sizing the icon. */
  .md-36 { font-size: 36px; }
</style>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f)
})(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
<!-- End Google Tag Manager -->

<script async="" defer="" src="../assets/api_survey.js"></script>

<!-- Styles and scripting for handling custom code snippets -->
<link href="../assets/snippets.css" rel="stylesheet" type="text/css">
<script src="../assets/snippets.js"></script>

<link rel="search" type="application/opensearchdescription+xml" title="Flutter API" href="/opensearch.xml"/>

</head>


<body data-base-href="../" data-using-base-href="true" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="services/services-library.html">services</a></li>
    <li class="self-crumb">RestorationBucket class</li>
  </ol>
  <div class="self-name">RestorationBucket</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        brightness_4
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        brightness_5
      </span>
    </label>
  </div>
</header>
<main>

  <div
      id="dartdoc-main-content"
      class="main-content"
      data-above-sidebar="services&#47;services-library-sidebar.html"
      data-below-sidebar="services&#47;RestorationBucket-class-sidebar.html">
      <div>
  <div id="external-links" class="btn-group"><a title="View source code" class="source-link" href="https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/services/restoration.dart#L489"><span class="material-symbols-outlined">description</span></a></div>
<h1><span class="kind-class">RestorationBucket</span> class 
 
</h1></div>

    
<section class="desc markdown">
  <p>A <a href="services/RestorationBucket-class.html">RestorationBucket</a> holds pieces of the restoration data that a part of
the application needs to restore its state.</p>
<p>For a general overview of how state restoration works in Flutter, see the
<a href="services/RestorationManager-class.html">RestorationManager</a>.</p>
<p><a href="services/RestorationBucket-class.html">RestorationBucket</a>s are organized in a tree that is rooted in
<a href="services/RestorationManager/rootBucket.html">RestorationManager.rootBucket</a> and managed by a <a href="services/RestorationManager-class.html">RestorationManager</a>. The
tree is serializable and must contain all the data an application needs to
restore its current state at a later point in time.</p>
<p>A <a href="services/RestorationBucket-class.html">RestorationBucket</a> stores restoration data as key-value pairs. The key is
a <a href="dart-core/String-class.html">String</a> representing a restoration ID that identifies a piece of data
uniquely within a bucket. The value can be anything that is serializable via
the <a href="services/StandardMessageCodec-class.html">StandardMessageCodec</a>. Furthermore, a <a href="services/RestorationBucket-class.html">RestorationBucket</a> may have
child buckets, which are identified within their parent via a unique
restoration ID as well.</p>
<p>During state restoration, the data previously stored in the
<a href="services/RestorationBucket-class.html">RestorationBucket</a> hierarchy will be made available again to the
application to restore it to the state it had when the data was collected.
State restoration to a previous state may happen when the app is launched
(e.g. after it has been terminated gracefully while running in the
background) or after the app has already been running for a while.</p>
<h2 id="lifecycle">Lifecycle</h2>
<p>A <a href="services/RestorationBucket-class.html">RestorationBucket</a> is rarely instantiated directly via its constructors.
Instead, when an entity wants to store data in or retrieve data from a
restoration bucket, it typically obtains a child bucket from a parent by
calling <a href="services/RestorationBucket/claimChild.html">claimChild</a>. If no parent is available,
<a href="services/RestorationManager/rootBucket.html">RestorationManager.rootBucket</a> may be used as a parent. When claiming a
child, the claimer must provide the restoration ID of the child it would
like to own. A child bucket with a given restoration ID can at most have
one owner. If another owner tries to claim a bucket with the same ID from
the same parent, an exception is thrown (see discussion in <a href="services/RestorationBucket/claimChild.html">claimChild</a>).
The restoration IDs that a given owner uses to claim a child (and to store
data in that child, see below) must be stable across app launches to ensure
that after the app restarts the owner can retrieve the same data again that
it stored during a previous run.</p>
<p>Per convention, the owner of the bucket has exclusive access to the values
stored in the bucket. It can read, add, modify, and remove values via the
<a href="services/RestorationBucket/read.html">read</a>, <a href="services/RestorationBucket/write.html">write</a>, and <a href="services/RestorationBucket/remove.html">remove</a> methods. In general, the owner should store
all the data in the bucket that it needs to restore its current state. If
its current state changes, the data in the bucket must be updated. At the
same time, the data in the bucket should be kept to a minimum. For example,
for data that can be retrieved from other sources (like a database or
web service) only enough information (e.g. an ID or resource locator) to
re-obtain that data should be stored in the bucket. In addition to managing
the data in a bucket, an owner may also make the bucket available to other
entities so they can claim child buckets from it via <a href="services/RestorationBucket/claimChild.html">claimChild</a> for their
own restoration needs.</p>
<p>The bucket returned by <a href="services/RestorationBucket/claimChild.html">claimChild</a> may either contain state information
that the owner had previously (e.g. during a previous run of the
application) stored in it or it may be empty. If the bucket contains data,
the owner is expected to restore its state with the information previously
stored in the bucket. If the bucket is empty, it may initialize itself to
default values.</p>
<p>When the data stored in a bucket is no longer needed to restore the
application to its current state (e.g. because the owner of the bucket is no
longer shown on screen), the bucket must be <a href="services/RestorationBucket/dispose.html">dispose</a>d. This will remove all
information stored in the bucket from the app's restoration data and that
information will not be available again when the application is restored to
this state in the future.</p>
</section>



    
  <section class="summary offset-anchor" id="constructors">
    <h2>Constructors</h2>

    <dl class="constructor-summary-list">
        <dt id="RestorationBucket.child" class="callable">
          <span class="name"><a href="services/RestorationBucket/RestorationBucket.child.html">RestorationBucket.child</a></span><span class="signature">(<span class="parameter" id="child-param-restorationId">{<span>required</span> <span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">restorationId</span>, </span><span class="parameter" id="child-param-parent"><span>required</span> <span class="type-annotation"><a href="services/RestorationBucket-class.html">RestorationBucket</a></span> <span class="parameter-name">parent</span>, </span><span class="parameter" id="child-param-debugOwner"><span>required</span> <span class="type-annotation"><a href="dart-core/Object-class.html">Object</a>?</span> <span class="parameter-name">debugOwner</span>}</span>)</span>
        </dt>
        <dd>
          Creates a child bucket initialized with the data that the provided
<code>parent</code> has stored under the provided <code>restorationId</code>.
        </dd>
        <dt id="RestorationBucket.empty" class="callable">
          <span class="name"><a href="services/RestorationBucket/RestorationBucket.empty.html">RestorationBucket.empty</a></span><span class="signature">(<span class="parameter" id="empty-param-restorationId">{<span>required</span> <span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">restorationId</span>, </span><span class="parameter" id="empty-param-debugOwner"><span>required</span> <span class="type-annotation"><a href="dart-core/Object-class.html">Object</a>?</span> <span class="parameter-name">debugOwner</span>}</span>)</span>
        </dt>
        <dd>
          Creates an empty <a href="services/RestorationBucket-class.html">RestorationBucket</a> to be provided to <a href="services/RestorationBucket/adoptChild.html">adoptChild</a> to add
it to the bucket hierarchy.
        </dd>
        <dt id="RestorationBucket.root" class="callable">
          <span class="name"><a href="services/RestorationBucket/RestorationBucket.root.html">RestorationBucket.root</a></span><span class="signature">(<span class="parameter" id="root-param-manager">{<span>required</span> <span class="type-annotation"><a href="services/RestorationManager-class.html">RestorationManager</a></span> <span class="parameter-name">manager</span>, </span><span class="parameter" id="root-param-rawData"><span>required</span> <span class="type-annotation"><a href="dart-core/Map-class.html">Map</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="dart-core/Object-class.html">Object</a>?</span>, <span class="type-parameter"><a href="dart-core/Object-class.html">Object</a>?</span>&gt;</span>?</span> <span class="parameter-name">rawData</span>}</span>)</span>
        </dt>
        <dd>
          Creates the root <a href="services/RestorationBucket-class.html">RestorationBucket</a> for the provided restoration
<code>manager</code>.
        </dd>
    </dl>
  </section>

    <section class="summary offset-anchor" id="instance-properties">
      <h2>Properties</h2>

      <dl class="properties">
        <dt id="debugOwner" class="property">
  <span class="name"><a href="services/RestorationBucket/debugOwner.html">debugOwner</a></span>
  <span class="signature">&#8594; <a href="dart-core/Object-class.html">Object</a>?</span> 

</dt>
<dd>
  The owner of the bucket that was provided when the bucket was claimed via
<a href="services/RestorationBucket/claimChild.html">claimChild</a>.
  <div class="features"><span class="feature">read-only</span></div>

</dd>

        <dt id="hashCode" class="property inherited">
  <span class="name"><a href="dart-core/Object/hashCode.html">hashCode</a></span>
  <span class="signature">&#8594; <a href="dart-core/int-class.html">int</a></span> 

</dt>
<dd class="inherited">
  The hash code for this object.
  <div class="features"><span class="feature">read-only</span><span class="feature">inherited</span></div>

</dd>

        <dt id="isReplacing" class="property">
  <span class="name"><a href="services/RestorationBucket/isReplacing.html">isReplacing</a></span>
  <span class="signature">&#8594; <a href="dart-core/bool-class.html">bool</a></span> 

</dt>
<dd>
  Returns true when entities processing this bucket should restore their
state from the information in the bucket (e.g. via <a href="services/RestorationBucket/read.html">read</a> and
<a href="services/RestorationBucket/claimChild.html">claimChild</a>) instead of copying their current state information into the
bucket (e.g. via <a href="services/RestorationBucket/write.html">write</a> and <a href="services/RestorationBucket/adoptChild.html">adoptChild</a>.
  <div class="features"><span class="feature">read-only</span></div>

</dd>

        <dt id="restorationId" class="property">
  <span class="name"><a href="services/RestorationBucket/restorationId.html">restorationId</a></span>
  <span class="signature">&#8594; <a href="dart-core/String-class.html">String</a></span> 

</dt>
<dd>
  The restoration ID under which the bucket is currently stored in the
parent of this bucket (or wants to be stored if it is currently
parent-less).
  <div class="features"><span class="feature">read-only</span></div>

</dd>

        <dt id="runtimeType" class="property inherited">
  <span class="name"><a href="dart-core/Object/runtimeType.html">runtimeType</a></span>
  <span class="signature">&#8594; <a href="dart-core/Type-class.html">Type</a></span> 

</dt>
<dd class="inherited">
  A representation of the runtime type of the object.
  <div class="features"><span class="feature">read-only</span><span class="feature">inherited</span></div>

</dd>

      </dl>
    </section>

    
  <section
      class="summary offset-anchor"
      id="instance-methods">
    <h2>Methods</h2>
    <dl class="callables">
        <dt id="adoptChild" class="callable">
  <span class="name"><a href="services/RestorationBucket/adoptChild.html">adoptChild</a></span><span class="signature">(<wbr><span class="parameter" id="adoptChild-param-child"><span class="type-annotation"><a href="services/RestorationBucket-class.html">RestorationBucket</a></span> <span class="parameter-name">child</span></span>)
    <span class="returntype parameter">&#8594; void</span>
  </span>
  

</dt>
<dd>
  Adopts the provided <code>child</code> bucket.
  

</dd>

        <dt id="claimChild" class="callable">
  <span class="name"><a href="services/RestorationBucket/claimChild.html">claimChild</a></span><span class="signature">(<wbr><span class="parameter" id="claimChild-param-restorationId"><span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">restorationId</span>, </span><span class="parameter" id="claimChild-param-debugOwner">{<span>required</span> <span class="type-annotation"><a href="dart-core/Object-class.html">Object</a>?</span> <span class="parameter-name">debugOwner</span>}</span>)
    <span class="returntype parameter">&#8594; <a href="services/RestorationBucket-class.html">RestorationBucket</a></span>
  </span>
  

</dt>
<dd>
  Claims ownership of the child with the provided <code>restorationId</code> from this
bucket.
  

</dd>

        <dt id="contains" class="callable">
  <span class="name"><a href="services/RestorationBucket/contains.html">contains</a></span><span class="signature">(<wbr><span class="parameter" id="contains-param-restorationId"><span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">restorationId</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-core/bool-class.html">bool</a></span>
  </span>
  

</dt>
<dd>
  Checks whether a value stored in the bucket under the provided
<code>restorationId</code>.
  

</dd>

        <dt id="dispose" class="callable">
  <span class="name"><a href="services/RestorationBucket/dispose.html">dispose</a></span><span class="signature">(<wbr>)
    <span class="returntype parameter">&#8594; void</span>
  </span>
  

</dt>
<dd>
  Deletes the bucket and all the data stored in it from the bucket
hierarchy.
  

</dd>

        <dt id="finalize" class="callable">
  <span class="name"><a href="services/RestorationBucket/finalize.html">finalize</a></span><span class="signature">(<wbr>)
    <span class="returntype parameter">&#8594; void</span>
  </span>
  

</dt>
<dd>
  Called by the <a href="services/RestorationManager-class.html">RestorationManager</a> just before the data of the bucket
is serialized and send to the engine.
  

</dd>

        <dt id="noSuchMethod" class="callable inherited">
  <span class="name"><a href="dart-core/Object/noSuchMethod.html">noSuchMethod</a></span><span class="signature">(<wbr><span class="parameter" id="noSuchMethod-param-invocation"><span class="type-annotation"><a href="dart-core/Invocation-class.html">Invocation</a></span> <span class="parameter-name">invocation</span></span>)
    <span class="returntype parameter">&#8594; dynamic</span>
  </span>
  

</dt>
<dd class="inherited">
  Invoked when a nonexistent method or property is accessed.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

        <dt id="read" class="callable">
  <span class="name"><a href="services/RestorationBucket/read.html">read</a></span><span class="signature">&lt;<wbr><span class="type-parameter">P</span>&gt;</span><span class="signature">(<wbr><span class="parameter" id="read-param-restorationId"><span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">restorationId</span></span>)
    <span class="returntype parameter">&#8594; P?</span>
  </span>
  

</dt>
<dd>
  Returns the value of type <code>P</code> that is currently stored in the bucket under
the provided <code>restorationId</code>.
  

</dd>

        <dt id="remove" class="callable">
  <span class="name"><a href="services/RestorationBucket/remove.html">remove</a></span><span class="signature">&lt;<wbr><span class="type-parameter">P</span>&gt;</span><span class="signature">(<wbr><span class="parameter" id="remove-param-restorationId"><span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">restorationId</span></span>)
    <span class="returntype parameter">&#8594; P?</span>
  </span>
  

</dt>
<dd>
  Deletes the value currently stored under the provided <code>restorationId</code> from
the bucket.
  

</dd>

        <dt id="rename" class="callable">
  <span class="name"><a href="services/RestorationBucket/rename.html">rename</a></span><span class="signature">(<wbr><span class="parameter" id="rename-param-newRestorationId"><span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">newRestorationId</span></span>)
    <span class="returntype parameter">&#8594; void</span>
  </span>
  

</dt>
<dd>
  Changes the restoration ID under which the bucket is (or will be) stored
in its parent to <code>newRestorationId</code>.
  

</dd>

        <dt id="toString" class="callable">
  <span class="name"><a href="services/RestorationBucket/toString.html">toString</a></span><span class="signature">(<wbr>)
    <span class="returntype parameter">&#8594; <a href="dart-core/String-class.html">String</a></span>
  </span>
  

</dt>
<dd>
  A string representation of this object.
  <div class="features"><span class="feature">override</span></div>

</dd>

        <dt id="write" class="callable">
  <span class="name"><a href="services/RestorationBucket/write.html">write</a></span><span class="signature">&lt;<wbr><span class="type-parameter">P</span>&gt;</span><span class="signature">(<wbr><span class="parameter" id="write-param-restorationId"><span class="type-annotation"><a href="dart-core/String-class.html">String</a></span> <span class="parameter-name">restorationId</span>, </span><span class="parameter" id="write-param-value"><span class="type-annotation">P</span> <span class="parameter-name">value</span></span>)
    <span class="returntype parameter">&#8594; void</span>
  </span>
  

</dt>
<dd>
  Stores the provided <code>value</code> of type <code>P</code> under the provided <code>restorationId</code>
in the bucket.
  

</dd>

    </dl>
  </section>
    
  <section
      class="summary offset-anchor inherited"
      id="operators">
    <h2>Operators</h2>
    <dl class="callables">
        <dt id="operator ==" class="callable inherited">
  <span class="name"><a href="dart-core/Object/operator_equals.html">operator ==</a></span><span class="signature">(<wbr><span class="parameter" id="==-param-other"><span class="type-annotation"><a href="dart-core/Object-class.html">Object</a></span> <span class="parameter-name">other</span></span>)
    <span class="returntype parameter">&#8594; <a href="dart-core/bool-class.html">bool</a></span>
  </span>
  

</dt>
<dd class="inherited">
  The equality operator.
  <div class="features"><span class="feature">inherited</span></div>

</dd>

    </dl>
  </section>
    
    
    


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="services/services-library.html">services</a></li>
    <li class="self-crumb">RestorationBucket class</li>
</ol>


    <!--<h5>services library</h5>-->
    <div id="dartdoc-sidebar-left-content"></div>
  </div>

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    Flutter
      0.0.0
  </span>

  <script src="footer.js"></script>
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


</body>

</html>

